<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin ‚Äì Prince Learning Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --accent: #6366f1;
      --accent-2: #22c55e;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --border: #1f2937;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(15,23,42,0.85);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#1f2937 0,#020617 40%,#000 100%);
      color:var(--text);min-height:100vh;
    }
    .app{max-width:1200px;margin:0 auto;padding:16px 16px 50px;}
    header{padding:18px 0 16px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center}
    header h1{font-size:1.6rem;display:flex;gap:8px;align-items:center}
    header p{font-size:.85rem;color:var(--text-soft)}
    .badge{font-size:.75rem;padding:4px 10px;border-radius:999px;border:1px solid rgba(148,163,184,.5);background:linear-gradient(135deg,rgba(15,23,42,.9),rgba(15,23,42,.5));display:inline-flex;align-items:center;gap:6px}
    main{display:grid;grid-template-columns:minmax(0,1.6fr) minmax(0,1.1fr);gap:16px;align-items:flex-start}
    @media(max-width:900px){main{grid-template-columns:minmax(0,1fr)}}
    .card{background:radial-gradient(circle at top left,rgba(37,99,235,.08),transparent 55%),radial-gradient(circle at bottom right,rgba(34,197,94,.08),transparent 55%),var(--card);border-radius:var(--radius-lg);border:1px solid rgba(31,41,55,.95);box-shadow:var(--shadow-soft);padding:14px 14px 16px;margin-bottom:14px}
    .card-header{display:flex;justify-content:space-between;gap:8px;align-items:center;margin-bottom:8px}
    .card-header h2{font-size:.95rem;display:flex;gap:6px;align-items:center}
    .card-header span{font-size:.8rem;color:var(--text-soft)}
    .profile-grid{display:grid;grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);gap:10px}
    @media(max-width:700px){.profile-grid{grid-template-columns:minmax(0,1fr)}}
    .field-group{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}
    label{font-size:.8rem;color:var(--text-soft)}
    input[type=text],input[type=date],input[type=number],textarea,select{
      background:rgba(15,23,42,.95);border-radius:10px;border:1px solid rgba(55,65,81,.95);color:var(--text);padding:6px 8px;font-size:.8rem;outline:none;width:100%
    }
    textarea{min-height:60px;resize:vertical}
    input:focus,textarea:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 1px rgba(99,102,241,.6)}
    .btn{border-radius:999px;padding:6px 12px;border:none;font-size:.8rem;cursor:pointer;display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,var(--accent),#4f46e5);color:#fff;box-shadow:0 10px 22px rgba(88,80,236,.55);margin-top:4px}
    .btn-secondary{background:rgba(15,23,42,.95);border:1px solid rgba(148,163,184,.6);color:var(--text-soft);box-shadow:none}
    .btn:hover{transform:translateY(-1px)}
    .skills-section{max-height:520px;display:flex;flex-direction:column}
    .skills-list{overflow-y:auto;padding-right:4px;margin-top:4px}
    .skills-category{margin-bottom:8px;border-radius:var(--radius-md);background:rgba(15,23,42,.97);border:1px solid rgba(31,41,55,.95)}
    .skills-category-header{display:flex;justify-content:space-between;align-items:center;padding:7px 8px;cursor:pointer}
    .skills-category-header h3{font-size:.82rem;display:flex;gap:6px;align-items:center}
    .skills-category-body{padding:6px 8px 8px;border-top:1px solid rgba(31,41,55,.95)}
    .skill-item{display:grid;grid-template-columns:minmax(0,1.8fr) minmax(0,1fr);gap:6px;align-items:center;padding:4px 4px;border-radius:8px;font-size:.8rem}
    .skill-item:nth-child(odd){background:rgba(15,23,42,.95)}
    .table-wrapper{margin-top:4px;border-radius:12px;border:1px solid rgba(31,41,55,.95);background:rgba(15,23,42,.97);max-height:260px;overflow-y:auto}
    table{width:100%;border-collapse:collapse;font-size:.78rem}
    th,td{padding:6px 8px;border-bottom:1px solid rgba(31,41,55,.95);vertical-align:top}
    th{position:sticky;top:0;background:rgba(15,23,42,.98);text-align:left;font-weight:500;color:var(--text-soft);z-index:1}
    tr:nth-child(even) td{background:rgba(15,23,42,.96)}
    .section-note{font-size:.74rem;color:var(--text-soft);margin-top:4px}
    .checklist{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:4px 8px;font-size:.78rem;margin-top:6px}
    .checklist-item{display:flex;align-items:center;gap:6px}
    .lock-screen{
      max-width:420px;margin:80px auto;padding:18px 16px;border-radius:var(--radius-lg);
      background:radial-gradient(circle at top left,rgba(37,99,235,.1),transparent 55%),var(--card);
      border:1px solid rgba(31,41,55,.95);box-shadow:var(--shadow-soft);text-align:center
    }
    .lock-screen h2{font-size:1.2rem;margin-bottom:8px}
    .lock-screen p{font-size:.82rem;color:var(--text-soft);margin-bottom:10px}
    .lock-screen input{margin-top:6px;text-align:center}
    .hidden{display:none}
    ::-webkit-scrollbar{width:6px;height:6px}
    ::-webkit-scrollbar-thumb{background:rgba(55,65,81,.95);border-radius:999px}
    ::-webkit-scrollbar-track{background:rgba(15,23,42,.95)}
  </style>
</head>
<body>
  <!-- Simple passcode gate (visible in source, not real security) -->
  <div class="lock-screen" id="lock-screen">
    <h2>üîê Admin Access</h2>
    <p>This is your private control panel. Enter your admin passcode.</p>
    <input type="password" id="admin-pass" placeholder="Enter passcode" />
    <button class="btn" id="unlock-btn" style="margin-top:8px;">Unlock</button>
    <p class="section-note">Note: For real security use Firebase Auth; this is just a simple lock.</p>
  </div>

  <div class="app hidden" id="app-root">
    <header>
      <div>
        <h1>üõ† Admin ‚Äì Unified Learning Tracker</h1>
        <p>Private dashboard to update skills, projects, jobs, progress & logs. Public page syncs automatically.</p>
      </div>
      <div class="badge">You are in ADMIN mode ¬∑ Changes are LIVE on public site</div>
    </header>

    <main>
      <section>
        <!-- Profile -->
        <div class="card">
          <div class="card-header">
            <h2>üß≠ Profile</h2>
            <span>Controls public profile section</span>
          </div>
          <div class="profile-grid">
            <div>
              <div class="field-group">
                <label>Name</label>
                <input type="text" id="profile-name" value="Prince" />
              </div>
              <div class="field-group">
                <label>Target Role</label>
                <input type="text" id="profile-target-role" placeholder="e.g. Data Analyst Intern" />
              </div>
              <div class="field-group">
                <label>Long-term Goal</label>
                <input type="text" id="profile-long-goal" value="Data Scientist / Analyst / AI Engineer" />
              </div>
              <div class="field-group">
                <label>Experience Level</label>
                <select id="profile-experience">
                  <option value="Fresher / Intern">Fresher / Intern</option>
                  <option value="0‚Äì1 years">0‚Äì1 years</option>
                  <option value="1‚Äì2 years">1‚Äì2 years</option>
                </select>
              </div>
            </div>
            <div>
              <div class="field-group">
                <label>Current Focus (shows publicly)</label>
                <textarea id="profile-focus" placeholder="e.g. Strengthening SQL + Power BI, doing 1 project per month."></textarea>
              </div>
              <div class="field-group">
                <label>Profile Tags (comma separated)</label>
                <input type="text" id="profile-tags" placeholder="e.g. Data Analyst Track, Power BI + SQL, ML Basics" />
              </div>
              <button class="btn" id="save-profile-btn">üíæ Save Profile</button>
            </div>
          </div>
          <p class="section-note">Changes appear on the public page instantly.</p>
        </div>

        <!-- Skills -->
        <div class="card skills-section">
          <div class="card-header">
            <h2>üìö Skills</h2>
            <span>Mark Not Started / In Progress / Done</span>
          </div>

          <!-- SKILL SUMMARY LEGEND -->
          <div style="display:flex;gap:12px;font-size:13px;margin-bottom:10px;">
            <div id="admin-total-skills">Total: 0</div>
            <div style="color:#22c55e" id="admin-done-skills">‚úÖ Done: 0</div>
            <div style="color:#eab308" id="admin-progress-skills">‚è≥ In Progress: 0</div>
            <div style="color:#9ca3af" id="admin-not-skills">‚ùå Not Started: 0</div>
          </div>

          <div class="skills-list" id="skills-list">
            <p class="section-note">This drives the progress bar and counts on the public page.</p>
          </div>
        </div>

        <!-- Weekly Progress -->
        <div class="card">
          <div class="card-header">
            <h2>üìà Weekly Progress</h2>
            <span>Shows as a table on public view</span>
          </div>
          <form id="weekly-progress-form">
            <div class="field-group">
              <label>Skill</label>
              <input type="text" id="wp-skill" placeholder="e.g. SQL Joins" />
            </div>
            <div class="field-group">
              <label>Current Level</label>
              <select id="wp-current">
                <option>Not Started</option>
                <option>Beginner</option>
                <option>Intermediate</option>
                <option>Advanced</option>
                <option>Expert</option>
              </select>
            </div>
            <div class="field-group">
              <label>Target Level</label>
              <select id="wp-target">
                <option>Beginner</option>
                <option>Intermediate</option>
                <option>Advanced</option>
                <option>Expert</option>
              </select>
            </div>
            <div class="field-group">
              <label>Progress (%)</label>
              <input type="number" id="wp-progress" min="0" max="100" value="0" />
            </div>
            <button class="btn" type="submit">Save Entry</button>
          </form>
          <div class="table-wrapper">
            <table id="weekly-progress-table">
              <thead>
                <tr>
                  <th>Skill</th>
                  <th>Current</th>
                  <th>Target</th>
                  <th>Progress</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <section>
        <!-- Projects -->
        <div class="card">
          <div class="card-header">
            <h2>üß© Projects</h2>
            <span>Shown publicly with tools, skills & outcome</span>
          </div>
          <form id="project-form">
            <div class="field-group">
              <label>Project Name</label>
              <input type="text" id="proj-name" />
            </div>
            <div class="field-group">
              <label>Description / Outcome</label>
              <textarea id="proj-outcome"></textarea>
            </div>
            <div class="field-group">
              <label>Tools Used</label>
              <input type="text" id="proj-tools" placeholder="e.g. Power BI, SQL, Python" />
            </div>
            <div class="field-group">
              <label>Skills Applied</label>
              <input type="text" id="proj-skills" placeholder="e.g. Data Cleaning, DAX, Visualization" />
            </div>
            <div class="field-group">
              <label>GitHub / Link (optional)</label>
              <input type="text" id="proj-link" placeholder="https://github.com/..." />
            </div>
            <button class="btn" type="submit">Save Project</button>
          </form>
          <div class="table-wrapper">
            <table id="project-table">
              <thead>
                <tr>
                  <th>Project</th>
                  <th>Tools</th>
                  <th>Skills</th>
                  <th>Outcome</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Jobs -->
        <div class="card">
          <div class="card-header">
            <h2>üíº Job Applications</h2>
            <span>High-level view is public</span>
          </div>
          <form id="job-form">
            <div class="field-group">
              <label>Company</label>
              <input type="text" id="job-company" />
            </div>
            <div class="field-group">
              <label>Role</label>
              <input type="text" id="job-role" />
            </div>
            <div class="field-group">
              <label>Platform</label>
              <input type="text" id="job-platform" placeholder="LinkedIn, Naukri, etc." />
            </div>
            <div class="field-group">
              <label>Date Applied</label>
              <input type="date" id="job-date" />
            </div>
            <div class="field-group">
              <label>Status</label>
              <select id="job-status">
                <option>Applied</option>
                <option>Interview</option>
                <option>Rejected</option>
                <option>Offer</option>
              </select>
            </div>
            <div class="field-group">
              <label>Follow-up Date</label>
              <input type="date" id="job-follow" />
            </div>
            <div class="field-group">
              <label>Notes (private)</label>
              <textarea id="job-notes"></textarea>
            </div>
            <button class="btn" type="submit">Save Application</button>
          </form>
          <div class="table-wrapper">
            <table id="job-table">
              <thead>
                <tr>
                  <th>Company</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Applied</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <p class="section-note">Notes are stored but not shown publicly.</p>
        </div>

        <!-- Learning Log (PRIVATE ONLY) -->
        <div class="card">
          <div class="card-header">
            <h2>üß† Daily Learning Log (Private)</h2>
            <span>Not shown on public site</span>
          </div>
          <form id="learning-form">
            <div class="field-group">
              <label>Date</label>
              <input type="date" id="learn-date" />
            </div>
            <div class="field-group">
              <label>Topic Studied</label>
              <input type="text" id="learn-topic" />
            </div>
            <div class="field-group">
              <label>What I Learned</label>
              <textarea id="learn-what"></textarea>
            </div>
            <div class="field-group">
              <label>Resources Used</label>
              <input type="text" id="learn-resources" />
            </div>
            <div class="field-group">
              <label>Next Steps</label>
              <textarea id="learn-next"></textarea>
            </div>
            <button class="btn" type="submit">Log Entry</button>
          </form>
          <div class="table-wrapper">
            <table id="learning-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Topic</th>
                  <th>Key Learning</th>
                  <th>Next Steps</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Interview checklist -->
        <div class="card">
          <div class="card-header">
            <h2>üé§ Interview Checklist</h2>
            <span>Drives interview readiness percent on public view</span>
          </div>
          <div class="checklist" id="interview-checklist">
            <label class="checklist-item">
              <input type="checkbox" data-int-key="resume" /> Resume optimized (ATS)
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="portfolio" /> Portfolio / GitHub updated
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="github" /> Project case studies ready
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="mock" /> Mock interviews completed
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="sql" /> SQL questions practice
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="case" /> 2‚Äì3 end-to-end case studies
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="behavioural" /> Behavioural answers (STAR)
            </label>
            <label class="checklist-item">
              <input type="checkbox" data-int-key="system" /> System for applying & tracking
            </label>
          </div>
          <p class="section-note">All of these sync to a single interview readiness score on public page.</p>
        </div>
      </section>
    </main>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    // ========= SIMPLE PASSCODE (not secure, just a gate) =========
    const ADMIN_PASSCODE = "Singhprince243/21";

    const lockScreen = document.getElementById('lock-screen');
    const appRoot = document.getElementById('app-root');
    document.getElementById('unlock-btn').addEventListener('click', () => {
      const val = document.getElementById('admin-pass').value;
      if (val === ADMIN_PASSCODE) {
        lockScreen.classList.add('hidden');
        appRoot.classList.remove('hidden');
        initApp();
      } else {
        alert('Wrong passcode');
      }
    });

    // ========= FIREBASE =========
    function initApp() {
      const firebaseConfig = {
        apiKey: "AIzaSyCmaSgRL7yr9dK4h1NDlRfXkWQRWdxVyuE",
        authDomain: "skills-tracker-f7069.firebaseapp.com",
        projectId: "skills-tracker-f7069",
        storageBucket: "skills-tracker-f7069.firebasestorage.app",
        messagingSenderId: "801878467914",
        appId: "1:801878467914:web:8bf953221c75262b334db3",
        measurementId: "G-7CXH6BCQ0R"
        };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      // ===== SKILL CATEGORIES ‚Äì from your union template =====
      const SKILL_CATEGORIES = [
        { id:'data_analysis', name:'üìä Data Analysis & Visualization', skills:[
          'Excel (Advanced)','Pivot Tables','VLOOKUP / XLOOKUP','Conditional Formatting','Data Cleaning (Excel)',
          'Power Query','Power BI','DAX','Data Modeling','Dashboard Design','KPI Visualization','Slicers & Filters',
          'Tableau','Google Data Studio / Looker Studio'
        ]},
        { id:'sql', name:'üóÑ SQL & Databases', skills:[
          'SQL Basics','Joins (Inner, Left, Right, Full)','Subqueries','CTEs','Window Functions',
          'Indexes','Data Warehousing Concepts','MySQL','PostgreSQL','Query Optimization'
        ]},
        { id:'python', name:'üêç Python for Data', skills:[
          'Core Python','NumPy','Pandas','Matplotlib','Seaborn',
          'Data Cleaning & Preprocessing (Python)','File Handling','API Handling','Automation Scripts','Exception Handling'
        ]},
        { id:'ml', name:'ü§ñ Data Science & Machine Learning', skills:[
          'Statistics Basics','Mean, Median, Mode','Standard Deviation','Correlation',
          'Probability','Hypothesis Testing','Regression Analysis','Supervised Learning','Unsupervised Learning',
          'Scikit-learn','Feature Engineering','Model Evaluation Metrics','Cross Validation','Overfitting / Underfitting',
          'Deep Learning Basics','TensorFlow / PyTorch','Neural Networks'
        ]},
        { id:'programming', name:'üíª Programming & Development', skills:[
          'C','C++','Python','JavaScript (Basics)','HTML','CSS','Tailwind CSS','Responsive Design',
          'Basic DOM Manipulation','Git','GitHub','Branching','Pull Requests'
        ]},
        { id:'tools', name:'üõ† Tools & Technologies', skills:[
          'Power BI','Excel','Figma (UI Design)','Jupyter Notebook','VS Code','Google Colab','Firebase','Cloudinary','APIs & JSON'
        ]},
        { id:'cloud', name:'‚òÅ Cloud Platforms', skills:[
          'Azure Portal','Azure Storage','Azure SQL / Databases','Azure Machine Learning (optional)',
          'AWS EC2','AWS S3','AWS RDS','AWS IAM Basics'
        ]},
        { id:'data_handling', name:'üì¶ Data Handling Skills', skills:[
          'Data Cleaning','Data Transformation','Data Wrangling','Exploratory Data Analysis (EDA)',
          'Data Validation','Data Visualization Best Practices','Report Writing','Dashboard Storytelling'
        ]},
        { id:'math_logic', name:'üßÆ Mathematics & Logic', skills:[
          'Linear Algebra Basics','Calculus Basics','Statistics','Logical Thinking','Problem Solving','Algorithmic Thinking'
        ]},
        { id:'soft', name:'ü§ù Soft Skills', skills:[
          'Communication Skills','Analytical Thinking','Critical Thinking','Problem Solving','Time Management',
          'Team Collaboration','Business Understanding','Presentation Skills','Stakeholder Communication','Adaptability',
          'Continuous Learning Mindset'
        ]},
        { id:'business', name:'üíº Business & Domain Skills', skills:[
          'Understanding Business KPIs','Requirement Analysis','Data-driven Decision Making','Market Analysis',
          'Financial Basics','Customer Segmentation','Forecasting'
        ]}
      ];

      // Utility
      const skillKey = (catId, skill) => `${catId}::${skill}`;

      // ===== PROFILE =====
      const profileRef = db.ref('profile');
      const pfName = document.getElementById('profile-name');
      const pfRole = document.getElementById('profile-target-role');
      const pfLong = document.getElementById('profile-long-goal');
      const pfExp = document.getElementById('profile-experience');
      const pfFocus = document.getElementById('profile-focus');
      const pfTags = document.getElementById('profile-tags');

      profileRef.on('value', snap => {
        const d = snap.val() || {};
        if (d.name) pfName.value = d.name;
        if (d.targetRole) pfRole.value = d.targetRole;
        if (d.longGoal) pfLong.value = d.longGoal;
        if (d.experience) pfExp.value = d.experience;
        if (d.focus) pfFocus.value = d.focus;
        if (d.tags) pfTags.value = d.tags.join(', ');
      });

      document.getElementById('save-profile-btn').addEventListener('click', () => {
        const tags = pfTags.value
          ? pfTags.value.split(',').map(t => t.trim()).filter(Boolean)
          : ['Data Analyst Track','Power BI + SQL','ML Basics'];
        profileRef.set({
          name: pfName.value.trim() || 'Prince',
          targetRole: pfRole.value.trim(),
          longGoal: pfLong.value.trim() || 'Data Scientist / Analyst / AI Engineer',
          experience: pfExp.value,
          focus: pfFocus.value.trim(),
          tags
        });
        alert('Profile saved ‚úÖ');
      });

      // ===== SKILLS =====
      const skillsRef = db.ref('skills');
      const skillsListEl = document.getElementById('skills-list');
      let skillStatuses = {};

      function renderSkills() {
        skillsListEl.innerHTML = '';
        SKILL_CATEGORIES.forEach(cat => {
          const catDiv = document.createElement('div');
          catDiv.className = 'skills-category';

          const header = document.createElement('div');
          header.className = 'skills-category-header';
          const h = document.createElement('h3');
          h.textContent = cat.name;
          const toggle = document.createElement('button');
          toggle.type = 'button';
          toggle.className = 'btn-secondary';
          toggle.style.fontSize = '.7rem';
          toggle.textContent = 'Collapse';
          header.appendChild(h);
          header.appendChild(toggle);

          const body = document.createElement('div');
          body.className = 'skills-category-body';

          cat.skills.forEach(skill => {
            const item = document.createElement('div');
            item.className = 'skill-item';
            const lbl = document.createElement('div');
            lbl.textContent = skill;
            const statusDiv = document.createElement('div');

            const select = document.createElement('select');
            const key = skillKey(cat.id, skill);
            select.dataset.skillId = key;
            select.innerHTML = `
              <option value="not-started">Not Started</option>
              <option value="in-progress">In Progress</option>
              <option value="done">Done</option>
            `;
            select.value = skillStatuses[key] || 'not-started';
            select.addEventListener('change', () => {
              const val = select.value;
              skillsRef.child(key).set(val);
            });

            statusDiv.appendChild(select);
            item.appendChild(lbl);
            item.appendChild(statusDiv);
            body.appendChild(item);
          });

          toggle.addEventListener('click', () => {
            const hidden = body.style.display === 'none';
            body.style.display = hidden ? 'block' : 'none';
            toggle.textContent = hidden ? 'Collapse' : 'Expand';
          });

          catDiv.appendChild(header);
          catDiv.appendChild(body);
          skillsListEl.appendChild(catDiv);
        });
      }

      skillsRef.on('value', snap => {
        skillStatuses = snap.val() || {};
        renderSkills();

        // ‚úÖ TOTAL = ALL skills defined, not only those updated
        let TOTAL_SKILLS = 0;
        SKILL_CATEGORIES.forEach(cat => {
          TOTAL_SKILLS += cat.skills.length;
        });

        let done = 0;
        let inProgress = 0;

        SKILL_CATEGORIES.forEach(cat => {
          cat.skills.forEach(skill => {
            const key = skillKey(cat.id, skill);
            const status = skillStatuses[key] || 'not-started';

            if (status === 'done') done++;
            else if (status === 'in-progress') inProgress++;
          });
        });

        const notStarted = TOTAL_SKILLS - done - inProgress;

        document.getElementById('admin-total-skills').textContent = `Total: ${TOTAL_SKILLS}`;
        document.getElementById('admin-done-skills').textContent = `‚úÖ Done: ${done}`;
        document.getElementById('admin-progress-skills').textContent = `‚è≥ In Progress: ${inProgress}`;
        document.getElementById('admin-not-skills').textContent = `‚ùå Not Started: ${notStarted}`;
      });



      // ===== WEEKLY PROGRESS =====
      const wpRef = db.ref('weeklyProgress');
      const wpTableBody = document.querySelector('#weekly-progress-table tbody');

      function renderWP(snap) {
        wpTableBody.innerHTML = '';
        const val = snap.val();
        if (!val) {
          const tr = document.createElement('tr');
          tr.innerHTML = '<td colspan="5">No weekly entries yet.</td>';
          wpTableBody.appendChild(tr);
          return;
        }
        const entries = Object.entries(val).reverse();
        entries.forEach(([id, row]) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.skill}</td>
            <td>${row.current}</td>
            <td>${row.target}</td>
            <td>${row.progress || 0}%</td>
            <td><button class="btn-secondary" data-wp-id="${id}">‚úï</button></td>
          `;
          wpTableBody.appendChild(tr);
        });
        wpTableBody.querySelectorAll('button[data-wp-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            wpRef.child(btn.dataset.wpId).remove();
          });
        });
      }

      wpRef.on('value', renderWP);

      document.getElementById('weekly-progress-form').addEventListener('submit', e => {
        e.preventDefault();
        const skill = document.getElementById('wp-skill').value.trim();
        if (!skill) return;
        const current = document.getElementById('wp-current').value;
        const target = document.getElementById('wp-target').value;
        const progress = Number(document.getElementById('wp-progress').value || 0);
        const ref = wpRef.push();
        ref.set({ skill, current, target, progress });
        e.target.reset();
      });

      // ===== PROJECTS =====
      const projRef = db.ref('projects');
      const projTableBody = document.querySelector('#project-table tbody');

      function renderProjects(snap) {
        projTableBody.innerHTML = '';
        const val = snap.val();
        if (!val) {
          const tr = document.createElement('tr');
          tr.innerHTML = '<td colspan="5">No projects yet.</td>';
          projTableBody.appendChild(tr);
          return;
        }
        const entries = Object.entries(val).reverse();
        entries.forEach(([id, p]) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${p.name}</td>
            <td>${p.tools || ''}</td>
            <td>${p.skills || ''}</td>
            <td>${p.outcome || ''}</td>
            <td><button class="btn-secondary" data-proj-id="${id}">‚úï</button></td>
          `;
          projTableBody.appendChild(tr);
        });
        projTableBody.querySelectorAll('button[data-proj-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            projRef.child(btn.dataset.projId).remove();
          });
        });
      }

      projRef.on('value', renderProjects);

      document.getElementById('project-form').addEventListener('submit', e => {
        e.preventDefault();
        const name = document.getElementById('proj-name').value.trim();
        if (!name) return;
        const outcome = document.getElementById('proj-outcome').value.trim();
        const tools = document.getElementById('proj-tools').value.trim();
        const skills = document.getElementById('proj-skills').value.trim();
        const link = document.getElementById('proj-link').value.trim();
        projRef.push({ name, outcome, tools, skills, link });
        e.target.reset();
      });

      // ===== JOBS =====
      const jobRef = db.ref('jobs');
      const jobTableBody = document.querySelector('#job-table tbody');

      function renderJobs(snap) {
        jobTableBody.innerHTML = '';
        const val = snap.val();
        if (!val) {
          const tr = document.createElement('tr');
          tr.innerHTML = '<td colspan="5">No applications yet.</td>';
          jobTableBody.appendChild(tr);
          return;
        }
        const entries = Object.entries(val).reverse();
        entries.forEach(([id, j]) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${j.company}</td>
            <td>${j.role}</td>
            <td>${j.status}</td>
            <td>${j.applied || ''}</td>
            <td><button class="btn-secondary" data-job-id="${id}">‚úï</button></td>
          `;
          jobTableBody.appendChild(tr);
        });
        jobTableBody.querySelectorAll('button[data-job-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            jobRef.child(btn.dataset.jobId).remove();
          });
        });
      }

      jobRef.on('value', renderJobs);

      document.getElementById('job-form').addEventListener('submit', e => {
        e.preventDefault();
        const company = document.getElementById('job-company').value.trim();
        if (!company) return;
        const role = document.getElementById('job-role').value.trim();
        const platform = document.getElementById('job-platform').value.trim();
        const applied = document.getElementById('job-date').value;
        const status = document.getElementById('job-status').value;
        const follow = document.getElementById('job-follow').value;
        const notes = document.getElementById('job-notes').value.trim();
        jobRef.push({ company, role, platform, applied, status, follow, notes });
        e.target.reset();
      });

      // ===== LEARNING LOG (PRIVATE) =====
      const learnRef = db.ref('learningLogs');
      const learnTableBody = document.querySelector('#learning-table tbody');

      function renderLearning(snap) {
        learnTableBody.innerHTML = '';
        const val = snap.val();
        if (!val) {
          const tr = document.createElement('tr');
          tr.innerHTML = '<td colspan="5">No learning entries yet.</td>';
          learnTableBody.appendChild(tr);
          return;
        }
        const entries = Object.entries(val).reverse();
        entries.forEach(([id, row]) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.date || ''}</td>
            <td>${row.topic}</td>
            <td>${row.what}</td>
            <td>${row.next}</td>
            <td><button class="btn-secondary" data-learn-id="${id}">‚úï</button></td>
          `;
          learnTableBody.appendChild(tr);
        });
        learnTableBody.querySelectorAll('button[data-learn-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            learnRef.child(btn.dataset.learnId).remove();
          });
        });
      }

      learnRef.on('value', renderLearning);

      document.getElementById('learning-form').addEventListener('submit', e => {
        e.preventDefault();
        const date = document.getElementById('learn-date').value;
        const topic = document.getElementById('learn-topic').value.trim();
        if (!topic) return;
        const what = document.getElementById('learn-what').value.trim();
        const res = document.getElementById('learn-resources').value.trim();
        const next = document.getElementById('learn-next').value.trim();
        learnRef.push({ date, topic, what, res, next });
        e.target.reset();
      });

      // ===== INTERVIEW CHECKLIST =====
      const intRef = db.ref('interviewChecklist');
      const intInputs = document.querySelectorAll('#interview-checklist input[type="checkbox"]');

      intRef.on('value', snap => {
        const val = snap.val() || {};
        intInputs.forEach(chk => {
          const key = chk.dataset.intKey;
          chk.checked = !!val[key];
        });
      });

      intInputs.forEach(chk => {
        chk.addEventListener('change', () => {
          const key = chk.dataset.intKey;
          intRef.child(key).set(chk.checked);
        });
      });
    }
  </script>
</body>
</html>
